(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2914],{29592:function(e,t,n){"use strict";n.d(t,{jV:function(){return i}});let i={version:"3.9.2",name:"spl_token_bonding",instructions:[{name:"initializeSolStorageV0",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"state",isMut:!0,isSigner:!1},{name:"solStorage",isMut:!1,isSigner:!1},{name:"wrappedSolMint",isMut:!1,isSigner:!1},{name:"mintAuthority",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"InitializeSolStorageV0Args"}}]},{name:"buyWrappedSolV0",accounts:[{name:"state",isMut:!1,isSigner:!1},{name:"wrappedSolMint",isMut:!0,isSigner:!1},{name:"mintAuthority",isMut:!1,isSigner:!1},{name:"solStorage",isMut:!0,isSigner:!1},{name:"source",isMut:!0,isSigner:!0},{name:"destination",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"BuyWrappedSolV0Args"}}]},{name:"sellWrappedSolV0",accounts:[{name:"state",isMut:!1,isSigner:!1},{name:"wrappedSolMint",isMut:!0,isSigner:!1},{name:"solStorage",isMut:!0,isSigner:!1},{name:"source",isMut:!0,isSigner:!1},{name:"owner",isMut:!1,isSigner:!0},{name:"destination",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"SellWrappedSolV0Args"}}]},{name:"createCurveV0",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"curve",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"CreateCurveV0Args"}}]},{name:"initializeTokenBondingV0",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"curve",isMut:!1,isSigner:!1},{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"targetMint",isMut:!1,isSigner:!1},{name:"baseStorage",isMut:!1,isSigner:!1},{name:"buyBaseRoyalties",isMut:!1,isSigner:!1},{name:"buyTargetRoyalties",isMut:!1,isSigner:!1},{name:"sellBaseRoyalties",isMut:!1,isSigner:!1},{name:"sellTargetRoyalties",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"InitializeTokenBondingV0Args"}}]},{name:"closeTokenBondingV0",accounts:[{name:"refund",isMut:!0,isSigner:!1},{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"generalAuthority",isMut:!1,isSigner:!0},{name:"targetMint",isMut:!0,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]},{name:"transferReservesV0",accounts:[{name:"common",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"reserveAuthority",isMut:!1,isSigner:!0},{name:"baseMint",isMut:!1,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}]},{name:"destination",isMut:!0,isSigner:!1}],args:[{name:"args",type:{defined:"TransferReservesV0Args"}}]},{name:"transferReservesNativeV0",accounts:[{name:"common",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"reserveAuthority",isMut:!1,isSigner:!0},{name:"baseMint",isMut:!1,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}]},{name:"destination",isMut:!0,isSigner:!1},{name:"state",isMut:!1,isSigner:!1},{name:"wrappedSolMint",isMut:!0,isSigner:!1},{name:"mintAuthority",isMut:!1,isSigner:!1},{name:"solStorage",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"TransferReservesV0Args"}}]},{name:"updateReserveAuthorityV0",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"reserveAuthority",isMut:!1,isSigner:!0}],args:[{name:"args",type:{defined:"UpdateReserveAuthorityV0Args"}}]},{name:"updateCurveV0",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"curveAuthority",isMut:!1,isSigner:!0},{name:"curve",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"UpdateCurveV0Args"}}]},{name:"updateTokenBondingV0",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"generalAuthority",isMut:!1,isSigner:!0},{name:"baseMint",isMut:!1,isSigner:!1},{name:"targetMint",isMut:!1,isSigner:!1},{name:"buyBaseRoyalties",isMut:!1,isSigner:!1},{name:"buyTargetRoyalties",isMut:!1,isSigner:!1},{name:"sellBaseRoyalties",isMut:!1,isSigner:!1},{name:"sellTargetRoyalties",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"UpdateTokenBondingV0Args"}}]},{name:"buyV1",accounts:[{name:"common",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"curve",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"targetMint",isMut:!0,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"buyBaseRoyalties",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"buyTargetRoyalties",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}]},{name:"state",isMut:!1,isSigner:!1},{name:"source",isMut:!0,isSigner:!1},{name:"sourceAuthority",isMut:!1,isSigner:!0}],args:[{name:"args",type:{defined:"BuyV0Args"}}]},{name:"buyNativeV0",accounts:[{name:"common",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"curve",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"targetMint",isMut:!0,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"buyBaseRoyalties",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"buyTargetRoyalties",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}]},{name:"source",isMut:!0,isSigner:!0},{name:"state",isMut:!1,isSigner:!1},{name:"wrappedSolMint",isMut:!0,isSigner:!1},{name:"mintAuthority",isMut:!1,isSigner:!1},{name:"solStorage",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"BuyV0Args"}}]},{name:"sellV1",accounts:[{name:"common",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"curve",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"targetMint",isMut:!0,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"sellBaseRoyalties",isMut:!0,isSigner:!1},{name:"source",isMut:!0,isSigner:!1},{name:"sourceAuthority",isMut:!1,isSigner:!0},{name:"sellTargetRoyalties",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}]},{name:"state",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1}],args:[{name:"args",type:{defined:"SellV0Args"}}]},{name:"sellNativeV0",accounts:[{name:"common",accounts:[{name:"tokenBonding",isMut:!0,isSigner:!1},{name:"curve",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"targetMint",isMut:!0,isSigner:!1},{name:"baseStorage",isMut:!0,isSigner:!1},{name:"sellBaseRoyalties",isMut:!0,isSigner:!1},{name:"source",isMut:!0,isSigner:!1},{name:"sourceAuthority",isMut:!1,isSigner:!0},{name:"sellTargetRoyalties",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1}]},{name:"destination",isMut:!0,isSigner:!1},{name:"state",isMut:!1,isSigner:!1},{name:"wrappedSolMint",isMut:!0,isSigner:!1},{name:"mintAuthority",isMut:!1,isSigner:!1},{name:"solStorage",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"args",type:{defined:"SellV0Args"}}]}],accounts:[{name:"ProgramStateV0",type:{kind:"struct",fields:[{name:"wrappedSolMint",type:"publicKey"},{name:"solStorage",type:"publicKey"},{name:"mintAuthorityBumpSeed",type:"u8"},{name:"solStorageBumpSeed",type:"u8"},{name:"bumpSeed",type:"u8"}]}},{name:"CurveV0",type:{kind:"struct",fields:[{name:"definition",type:{defined:"PiecewiseCurve"}}]}},{name:"TokenBondingV0",type:{kind:"struct",fields:[{name:"baseMint",type:"publicKey"},{name:"targetMint",type:"publicKey"},{name:"generalAuthority",type:{option:"publicKey"}},{name:"reserveAuthority",type:{option:"publicKey"}},{name:"curveAuthority",type:{option:"publicKey"}},{name:"baseStorage",type:"publicKey"},{name:"buyBaseRoyalties",type:"publicKey"},{name:"buyTargetRoyalties",type:"publicKey"},{name:"sellBaseRoyalties",type:"publicKey"},{name:"sellTargetRoyalties",type:"publicKey"},{name:"buyBaseRoyaltyPercentage",type:"u32"},{name:"buyTargetRoyaltyPercentage",type:"u32"},{name:"sellBaseRoyaltyPercentage",type:"u32"},{name:"sellTargetRoyaltyPercentage",type:"u32"},{name:"curve",type:"publicKey"},{name:"mintCap",type:{option:"u64"}},{name:"purchaseCap",type:{option:"u64"}},{name:"goLiveUnixTime",type:"i64"},{name:"freezeBuyUnixTime",type:{option:"i64"}},{name:"createdAtUnixTime",type:"i64"},{name:"buyFrozen",type:"bool"},{name:"sellFrozen",type:"bool"},{name:"index",type:"u16"},{name:"bumpSeed",type:"u8"},{name:"baseStorageBumpSeed",type:"u8"},{name:"targetMintAuthorityBumpSeed",type:"u8"},{name:"baseStorageAuthorityBumpSeed",type:{option:"u8"}},{name:"reserveBalanceFromBonding",type:"u64"},{name:"supplyFromBonding",type:"u64"},{name:"ignoreExternalReserveChanges",type:"bool"},{name:"ignoreExternalSupplyChanges",type:"bool"}]}}],types:[{name:"BuyWithBaseV0Args",type:{kind:"struct",fields:[{name:"baseAmount",type:"u64"},{name:"minimumTargetAmount",type:"u64"}]}},{name:"BuyTargetAmountV0Args",type:{kind:"struct",fields:[{name:"targetAmount",type:"u64"},{name:"maximumPrice",type:"u64"}]}},{name:"BuyV0Args",type:{kind:"struct",fields:[{name:"buyWithBase",type:{option:{defined:"BuyWithBaseV0Args"}}},{name:"buyTargetAmount",type:{option:{defined:"BuyTargetAmountV0Args"}}}]}},{name:"BuyWrappedSolV0Args",type:{kind:"struct",fields:[{name:"amount",type:"u64"}]}},{name:"CreateCurveV0Args",type:{kind:"struct",fields:[{name:"definition",type:{defined:"PiecewiseCurve"}}]}},{name:"InitializeSolStorageV0Args",type:{kind:"struct",fields:[{name:"mintAuthorityBumpSeed",type:"u8"},{name:"solStorageBumpSeed",type:"u8"},{name:"bumpSeed",type:"u8"}]}},{name:"InitializeTokenBondingV0Args",type:{kind:"struct",fields:[{name:"buyBaseRoyaltyPercentage",type:"u32"},{name:"buyTargetRoyaltyPercentage",type:"u32"},{name:"sellBaseRoyaltyPercentage",type:"u32"},{name:"sellTargetRoyaltyPercentage",type:"u32"},{name:"goLiveUnixTime",type:"i64"},{name:"freezeBuyUnixTime",type:{option:"i64"}},{name:"mintCap",type:{option:"u64"}},{name:"purchaseCap",type:{option:"u64"}},{name:"generalAuthority",type:{option:"publicKey"}},{name:"reserveAuthority",type:{option:"publicKey"}},{name:"curveAuthority",type:{option:"publicKey"}},{name:"buyFrozen",type:"bool"},{name:"index",type:"u16"},{name:"bumpSeed",type:"u8"},{name:"sellFrozen",type:"bool"},{name:"ignoreExternalReserveChanges",type:"bool"},{name:"ignoreExternalSupplyChanges",type:"bool"},{name:"initialReservesPad",type:"u64"},{name:"initialSupplyPad",type:"u64"}]}},{name:"SellV0Args",type:{kind:"struct",fields:[{name:"targetAmount",type:"u64"},{name:"minimumPrice",type:"u64"}]}},{name:"SellWrappedSolV0Args",type:{kind:"struct",fields:[{name:"amount",type:"u64"},{name:"all",type:"bool"}]}},{name:"TransferReservesV0Args",type:{kind:"struct",fields:[{name:"amount",type:"u64"}]}},{name:"UpdateCurveV0Args",type:{kind:"struct",fields:[{name:"curveAuthority",type:{option:"publicKey"}}]}},{name:"UpdateReserveAuthorityV0Args",type:{kind:"struct",fields:[{name:"newReserveAuthority",type:{option:"publicKey"}}]}},{name:"UpdateTokenBondingV0Args",type:{kind:"struct",fields:[{name:"generalAuthority",type:{option:"publicKey"}},{name:"buyBaseRoyaltyPercentage",type:"u32"},{name:"buyTargetRoyaltyPercentage",type:"u32"},{name:"sellBaseRoyaltyPercentage",type:"u32"},{name:"sellTargetRoyaltyPercentage",type:"u32"},{name:"buyFrozen",type:"bool"}]}},{name:"TimeCurveV0",type:{kind:"struct",fields:[{name:"offset",type:"i64"},{name:"curve",type:{defined:"PrimitiveCurve"}},{name:"buyTransitionFees",type:{option:{defined:"TransitionFeeV0"}}},{name:"sellTransitionFees",type:{option:{defined:"TransitionFeeV0"}}}]}},{name:"TransitionFeeV0",type:{kind:"struct",fields:[{name:"percentage",type:"u32"},{name:"interval",type:"u32"}]}},{name:"PrimitiveCurve",type:{kind:"enum",variants:[{name:"ExponentialCurveV0",fields:[{name:"c",type:"u128"},{name:"b",type:"u128"},{name:"pow",type:"u8"},{name:"frac",type:"u8"}]},{name:"TimeDecayExponentialCurveV0",fields:[{name:"c",type:"u128"},{name:"k1",type:"u128"},{name:"k0",type:"u128"},{name:"interval",type:"u32"},{name:"d",type:"u128"}]}]}},{name:"PiecewiseCurve",type:{kind:"enum",variants:[{name:"TimeV0",fields:[{name:"curves",type:{vec:{defined:"TimeCurveV0"}}}]}]}}],errors:[{code:6e3,name:"NoMintAuthority",msg:"Target mint must have an authority"},{code:6001,name:"InvalidMintAuthority",msg:"Target mint must have an authority that is a pda of this program"},{code:6002,name:"InvalidBaseStorageAuthority",msg:"Invalid base storage authority pda or seed did not match canonical seed for base storage authority"},{code:6003,name:"NoAuthority",msg:"Token bonding does not have an authority"},{code:6004,name:"ArithmeticError",msg:"Error in precise number arithmetic"},{code:6005,name:"PriceTooHigh",msg:"Buy price was higher than the maximum buy price. Try increasing max_price or slippage configuration"},{code:6006,name:"PriceTooLow",msg:"Sell price was lower than the minimum sell price. Try decreasing min_price or increasing slippage configuration"},{code:6007,name:"MintSupplyTooLow",msg:"Cannot sell more than the target mint currently has in supply"},{code:6008,name:"SellDisabled",msg:"Sell is not enabled on this bonding curve"},{code:6009,name:"NotLiveYet",msg:"This bonding curve is not live yet"},{code:6010,name:"PassedMintCap",msg:"Passed the mint cap"},{code:6011,name:"OverPurchaseCap",msg:"Cannot purchase that many tokens because of purchase cap"},{code:6012,name:"BuyFrozen",msg:"Buy is frozen on this bonding curve, purchases not allowed"},{code:6013,name:"WrappedSolNotAllowed",msg:"Use token bonding wrapped sol via buy_wrapped_sol, sell_wrapped_sol commands. We may one day provide liquid staking rewards on this stored sol."},{code:6014,name:"InvalidCurve",msg:"The provided curve is invalid"},{code:6015,name:"InvalidMint",msg:"An account was provided that did not have the correct mint"},{code:6016,name:"IgnoreExternalV1Only",msg:"Ignoring external changes is only supported on v1 of buy and sell endpoints. Please upgrade your client"},{code:6017,name:"InvalidPad",msg:"Cannot pad token bonding without ignoring external reserve and supply changes. This is an advanced feature, incorrect use could lead to insufficient resreves to cover sells"}],metadata:{address:"TBondmkCYxaPCKG4CHYfVTcwQ8on31xnJrPzk8F8WsS"}}},92231:function(e,t,n){"use strict";n.d(t,{ag:function(){return eA}});var i,r,a,o=n(90204),s=n(10676),u=n(22763),c=n(5462);async function l(e,t,n,i,r){return[c.SystemProgram.createAccount({fromPubkey:e.wallet.publicKey,newAccountPubkey:n,space:82,lamports:await e.connection.getMinimumBalanceForRentExemption(82),programId:u.TOKEN_PROGRAM_ID}),u.Token.createInitMintInstruction(u.TOKEN_PROGRAM_ID,n,i??0,t,r||null)]}async function d(e,t){let n=await e.connection.getAccountInfo(t);if(null===n)throw Error("Failed to find token account");return function(e){let t=u.MintLayout.decode(e);return t.mintAuthority=new c.PublicKey(t.mintAuthority),t.supply=u.u64.fromBuffer(t.supply),t.isInitialized=0!==t.state,t}(n.data)}async function g(e,t){let n=await e.connection.getAccountInfo(t);if(null===n)throw Error("Failed to find token account");return function(e){let t=u.AccountLayout.decode(e);return t.mint=new c.PublicKey(t.mint),t.owner=new c.PublicKey(t.owner),t.amount=u.u64.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new u.u64(0)):(t.delegate=new c.PublicKey(t.delegate),t.delegatedAmount=u.u64.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=u.u64.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new c.PublicKey(t.closeAuthority),t}(n.data)}function p(e){return new Promise(t=>setTimeout(t,e))}let m={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,StateInvalidAddress:4e3,Deprecated:5e3},h=new Map([[1,"Insufficient balance."],[2,"Invalid instruction data."],[3,"Invalid account data"],[4,"Account data too small"],[5,"Insufficient funds"],[6,"Incorrect prgoram id"],[7,"Missing required signature"],[8,"Account already initialized"],[9,"Attempt to operate on an account that was not yet initialized"],[10,"Not enough account keys provided"],[11,"Account borrow failed, already borrowed"],[12,"Max seed length exceeded"],[13,"Invalid seeds"],[14,"Borsh IO Error"],[15,"Account not rent exempt"]]),y=new Map([[m.InstructionMissing,"8 byte instruction identifier not provided"],[m.InstructionFallbackNotFound,"Fallback functions are not supported"],[m.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[m.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[m.IdlInstructionStub,"The program was compiled without idl instructions"],[m.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[m.ConstraintMut,"A mut constraint was violated"],[m.ConstraintHasOne,"A has_one constraint was violated"],[m.ConstraintSigner,"A signer constraint was violated"],[m.ConstraintRaw,"A raw constraint was violated"],[m.ConstraintOwner,"An owner constraint was violated"],[m.ConstraintRentExempt,"A rent exempt constraint was violated"],[m.ConstraintSeeds,"A seeds constraint was violated"],[m.ConstraintExecutable,"An executable constraint was violated"],[m.ConstraintState,"A state constraint was violated"],[m.ConstraintAssociated,"An associated constraint was violated"],[m.ConstraintAssociatedInit,"An associated init constraint was violated"],[m.ConstraintClose,"A close constraint was violated"],[m.ConstraintAddress,"An address constraint was violated"],[m.ConstraintZero,"Expected zero account discriminant"],[m.ConstraintTokenMint,"A token mint constraint was violated"],[m.ConstraintTokenOwner,"A token owner constraint was violated"],[m.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[m.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[m.ConstraintMintDecimals,"A mint decimals constraint was violated"],[m.ConstraintSpace,"A space constraint was violated"],[m.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[m.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[m.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[m.AccountDidNotDeserialize,"Failed to deserialize the account"],[m.AccountDidNotSerialize,"Failed to serialize the account"],[m.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[m.AccountNotMutable,"The given account is not mutable"],[m.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[m.InvalidProgramId,"Program ID was not as expected"],[m.InvalidProgramExecutable,"Program account is not executable"],[m.AccountNotSigner,"The given account did not sign"],[m.AccountNotSystemOwned,"The given account is not owned by the system program"],[m.AccountNotInitialized,"The program expected this account to be already initialized"],[m.AccountNotProgramData,"The given account is not a program data account"],[m.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[m.StateInvalidAddress,"The given state account does not have the correct address"],[m.Deprecated,"The API being used is deprecated and should no longer be used"]]);class f{code;msg;constructor(e,t,...n){this.code=e,this.msg=t}static parse(e,t){let n=null;if(e.InstructionError&&("number"==typeof e.InstructionError[0]&&(n=e.InstructionError[0]),e.InstructionError[1]?.Custom&&(n=e.InstructionError[1].Custom)),null==n){let t=e.toString().split("custom program error: ");if(null==n&&2!==t.length)return null;try{n=parseInt(t[1])}catch(e){return null}}let i=e.InstructionErr&&e.InstructionErr[1]||t.get(n)||y.get(n)||h.get(n);return void 0!==i?new f(n,i,n+": "+i):null}toString(){return this.msg}}async function w(e){let t=[];for(let n of e)t.push(await n());return t}async function b(e,t,n,i,r=t.wallet.publicKey,a="confirmed"){let o=new c.Transaction;o.recentBlockhash=(await t.connection.getRecentBlockhash()).blockhash,o.feePayer=r||t.wallet.publicKey,o.add(...n),i.length>0&&o.partialSign(...i),o=await t.wallet.signTransaction(o);try{let{txid:e}=await T(t.connection,o.serialize(),{skipPreflight:!0},a);return e}catch(n){console.error(n);let t=f.parse(n,e);throw null==t?n:t}}async function v(e,t,n,i,r,a="confirmed"){let o=(await t.connection.getRecentBlockhash("confirmed")).blockhash,s=n.map((e,t)=>{let n=i[t];return{instructions:e,signers:n}}).filter(({instructions:e})=>e.length>0),u=s.map(({instructions:e})=>{let n=new c.Transaction({feePayer:r||t.wallet.publicKey,recentBlockhash:o});return n.add(...e),n}),l=await t.wallet.signAllTransactions(u),d=l.map((e,t)=>{let n=s[t].signers;return n.length>0&&e.partialSign(...n),e}).map(e=>e.serialize());console.log("Sending multiple transactions...");try{return await w(d.map(e=>async()=>{let{txid:n}=await T(t.connection,e,{skipPreflight:!0},a);return n}))}catch(n){console.error(n);let t=f.parse(n,e);throw null==t?n:t}}function A(){return new Date().valueOf()/1e3}let S=async(e,t,n,i="recent",r=!1)=>{let a=!1,o={slot:0,confirmations:0,err:null},s=0;return o=await new Promise(async(u,c)=>{setTimeout(()=>{a||(a=!0,console.log("Rejecting for timeout..."),c({timeout:!0}))},t);try{console.log("COMMIMENT",i),s=n.onSignature(e,(e,t)=>{a=!0,o={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),c(o)):(console.log("Resolved via websocket",e),u(o))},i)}catch(t){a=!0,console.error("WS error in setup",e,t)}for(;!a&&r;)(async()=>{try{let t=await n.getSignatureStatuses([e]);o=t&&t.value[0],a||(o?o.err?(console.log("REST error for",e,o),a=!0,c(o.err)):o.confirmations||o.confirmationStatus?(console.log("REST confirmation for",e,o),o.confirmationStatus&&o.confirmationStatus!=i||(a=!0,u(o))):console.log("REST no confirmations for",e,o):console.log("REST null result for",e,o))}catch(t){a||console.log("REST connection error: txid",e,t)}})(),await p(2e3)}),n._signatureSubscriptions&&n._signatureSubscriptions[s]&&n.removeSignatureListener(s),a=!0,console.log("Returning status ",o),o};async function M(e,t,n){t.recentBlockhash=await e._recentBlockhash(e._disableBlockhashCaching);let i=t.serializeMessage(),r=t._serialize(i),a=r.toString("base64"),o=await e._rpcRequest("simulateTransaction",[a,{encoding:"base64",commitment:n}]);if(o.error)throw Error("failed to simulate transaction: "+o.error.message);return o.result}async function T(e,t,n,i,r=18e4){let a=!1,o=await e.sendRawTransaction(t,n),s=A();(async()=>{for(;!a&&A()-s<r;)await e.sendRawTransaction(t,n),await p(500)})();try{let t=await S(o,r,e,i,!0);if(!t)throw Error("Timed out awaiting confirmation on transaction");if(t.err){let n=await e.getTransaction(o);throw console.error(n?.meta?.logMessages?.join("\n")),console.error(t.err),Error("Transaction failed: Custom instruction error")}t?.slot}catch(i){if(console.error("Timeout Error caught",i),i.timeout)throw Error("Timed out awaiting confirmation on transaction");let n=null;try{n=(await M(e,c.Transaction.from(t),"single")).value}catch(n){let t=await e.getTransaction(o);console.error(t.meta.logMessages.join("\n"))}if(n&&n.err&&n.logs&&console.error(n.logs.join("\n")),i.err)throw i.err;throw i}finally{a=!0}return console.log("Latency",o,A()-s),{txid:o}}class P{program;provider;programId;rpc;instruction;wallet;account;errors;static ID;constructor(e){this.program=e.program,this.provider=e.provider,this.programId=e.program.programId,this.rpc=e.program.rpc,this.instruction=e.program.instruction,this.wallet=e.provider.wallet,this.account=e.program.account,this.errors=e.program.idl.errors?.reduce((e,t)=>(e.set(t.code,`${t.name}: ${t.msg}`),e),new Map)}async getAccount(e,t){let n=await this.provider.connection.getAccountInfo(e);return n?t(e,n):null}async sendInstructions(e,t,n,i){try{return await b(this.errors||new Map,this.provider,e,t,n,i)}catch(e){if(e.logs&&e.logs.some(e=>e.endsWith("consumed 200000 of 200000 compute units")))throw Error("Consumed all of the compute units. It's possible the price has moved too much, please try again.");throw e}}async execute(e,t=this.wallet.publicKey,n){let{instructions:i,signers:r,output:a}=await e;if(i.length>0){let e=await this.sendInstructions(i,r,t,n);return{txid:e,...a}}return a}async executeBig(e,t=this.wallet.publicKey,n){let{instructions:i,signers:r,output:a}=await e;if(i.length>0){let e=await v(this.errors||new Map,this.provider,i,r,t||this.wallet.publicKey,n);return{...a,txids:Array.from(e)}}return a}}let R=e=>{if(void 0!==e&&null!=e)return Math.floor(e/100*4294967295)};var k=n(98394),B=n.n(k);let I=e=>!!e;function E(e,t){let n=new u.u64(Math.pow(10,t.decimals).toString()),i=e.mod(n).toNumber()/n.toNumber();return e.div(n).toNumber()+i}var C=function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},O=n(2502),_=n(57579),x=n(65705)("arweave-cost"),K=new Map,N=function(e,t){var n=""+e.toString()+JSON.stringify(t);if(K.has(n))return K.get(n);var i=new Promise(function(n,i){return e.apply(void 0,t).catch(function(t){K.delete(e),i(t)}).then(n)});K.set(n,i);var r=setTimeout(function(){K.delete(n)},3e4);return r.unref&&r.unref(),i},D=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return N(e,t)}},V=D(function(){return O("https://api.coingecko.com/api/v3/simple/price?ids=solana,arweave&vs_currencies=usd").then(function(e){var t,n,i=e.data;if(!((null===(t=i.arweave)||void 0===t?void 0:t.usd)&&(null===(n=i.solana)||void 0===n?void 0:n.usd)))throw x("Invalid coingecko response",i),Error("Invalid response from coingecko");return i})}),U=D(function(e){return _(Number.isFinite(e),"Invalid argument: totalBytes. Received: "+e),O("https://arweave.net/price/"+e).then(function(e){return parseInt(e.data,10)})}),L=function(e){_(Array.isArray(e)&&e.length>0&&e.every(function(e){return Number(e)===e&&!isNaN(e)&&e>=0&&isFinite(e)}),"Invalid argument: fileSizes must be an array of integers")},z=function(e){var t,n,i,r;return t=void 0,n=void 0,i=void 0,r=function(){var t,n,i,r,a,o,s,u,c,l;return C(this,function(d){switch(d.label){case 0:return L(e),t=e.reduce(function(e,t){return e+t},0),[4,Promise.all([V(),U(t)])];case 1:return i=(n=d.sent())[0],s=(o=(r=n[1])+(a=t<102400?1e7:.15*r))/1e12,l=(u=i.arweave.usd)/(c=i.solana.usd),x("%j",{arweaveRate:u,solanaRate:c,exchangeRate:l,byteCost:r,WINSTON_MULTIPLIER:1e12,fee:a,totalWinstonCost:o,totalArCost:s,totalBytes:t}),[2,{arweave:s,solana:s*l,arweavePrice:u,solanaPrice:c,exchangeRate:l,byteCost:r,totalBytes:t,fee:a}]}})},new(i||(i=Promise))(function(e,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(o,s)}u((r=r.apply(t,n||[])).next())})},F=n(16002),G=n.n(F),q=n(73656),j=n(15313).Buffer;let W=new c.PublicKey("6FKvsq4ydWFci6nGq9ckbjYMtnmaqAoatz5c9XWjiDuS"),$=q.env.REACT_APP_ARWEAVE_UPLOAD_URL||"https://us-central1-metaplex-studios.cloudfunctions.net/uploadFile",H=new c.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr");async function Y(e,t,n,i=$,r="mainnet-beta"){let a=new FormData;a.append("transaction",e),a.append("env",r);let o=n.reduce((e,n)=>(e[n.name]=[{name:"mint",value:t.toBase58()}],e),{});a.append("tags",JSON.stringify(o)),n.map(e=>a.append("file[]",e));let s=await fetch(i,{method:"POST",body:a});if(!s.ok)return Promise.reject(Error("Unable to upload the artwork to Arweave. Please wait and then try again."));let u=await s.json();return u.error?Promise.reject(Error(u.error)):u}let J=async(e,t)=>{let n=[],i=t.map(e=>e.size),r=await z(i),a=Math.ceil(c.LAMPORTS_PER_SOL*r.solana);n.push(c.SystemProgram.transfer({fromPubkey:e,toPubkey:W,lamports:a}));for(let e=0;e<t.length;e++){let i=G().createHash("sha256");i.update(await t[e].text());let r=i.digest("hex");n.push(new c.TransactionInstruction({keys:[],programId:H,data:j.from(r)}))}return n};var X=n(41297),Z=n.n(X);(r||(r={})).Arweave="arweave",(i=a||(a={})).Audio="audio",i.Video="video",i.Image="image",i.VR="vr";let Q=e=>e,ee=(e,t)=>{let n=function(e){if(e?.image)return e?.image;{let t=(e?.properties?.files||[]).find(e=>"string"!=typeof e&&"Ima"===e.type)?.uri;return t}}(t);if(n){let i=n.startsWith("http")?t.image:`${e}/${t.image}`;return Q(i)}},et=void 0!==n.g&&n.g.localStorage||Z();class en{provider;static async init(e){return new this({provider:e})}constructor(e){this.provider=e.provider}static attributesToRecord(e){if(e)return e?.reduce((e,t)=>(t.trait_type&&(e[t.trait_type]=t.value),e),{})}static async getArweaveMetadata(e){if(e&&e.length>0){let t=Q(e),n=et.getItem(t);if(n)return JSON.parse(n);try{let e=await fetch(t),n=await e.json();n.uri&&(n={...n,...await en.getArweaveMetadata(n.uri)});try{et.setItem(t,JSON.stringify(n))}catch(e){}return n}catch(t){console.log(`Could not fetch from ${e}`,t);return}}}static async getImage(e){if(e){let t=Q(e),n=await en.getArweaveMetadata(e);return n?.uri?en.getImage(n?.uri):ee(t,n)}}async getEditionInfo(e){let t,n;if(!e)return{};let i=await o.Edition.getPDA(new c.PublicKey(e.mint)),r=await this.provider.connection.getAccountInfo(i),a=r?r?.data[0]==o.MetadataKey.EditionV1?new o.Edition(i,r):new o.MasterEdition(i,r):null;if(a instanceof o.Edition){t=a;let e=await this.provider.connection.getAccountInfo(new c.PublicKey(a.data.parent));n=e&&new o.MasterEdition(new c.PublicKey(a.data.parent),e)}else n=a;return{edition:t?.data,masterEdition:n?.data||void 0}}async getTokenMetadata(e){let t=await this.provider.connection.getAccountInfo(e),n=t&&new o.Metadata(e,t).data,i=await en.getArweaveMetadata(n?.data.uri),r=await en.getImage(n?.data.uri),a=i?.description,s=n&&await d(this.provider,new c.PublicKey(n.mint)),u=32==n?.data.name.length?i?.name:n?.data.name;return{displayName:u,metadata:n||void 0,metadataKey:e,image:r,mint:s||void 0,data:i,description:a,...n?await this.getEditionInfo(n):{}}}sendInstructions(e,t,n){return b(new Map,this.provider,e,t,n)}async uploadMetadata(e){return this.createArweaveMetadata({...e,image:e.image?.name,files:[e.image].filter(I),mint:e.mint})}async createArweaveMetadata(e){let{txid:t,files:n}=await this.presignCreateArweaveUrl(e),i=e.env;if(!i){let e=this.provider.connection._rpcEndpoint;i=e.includes("devnet")?"devnet":"mainnet-beta"}let r=await this.getArweaveUrl({txid:t,mint:e.mint,files:n,env:i,uploadUrl:e.uploadUrl||$});return r}async presignCreateArweaveUrlInstructions({name:e,symbol:t,description:n="",image:i,creators:r,files:o=[],payer:s=this.provider.wallet.publicKey,existingFiles:u,attributes:c,externalUrl:l,animationUrl:d,extraMetadata:g}){let p={name:e,symbol:t,description:n,image:i,attributes:c,externalUrl:l||"",animationUrl:d,properties:{category:a.Image,files:[...u||[],...o]},creators:r||null,sellerFeeBasisPoints:0,...g||{}},m=await function(e,t){let n={name:t.name,symbol:t.symbol,description:t.description,seller_fee_basis_points:t.sellerFeeBasisPoints,image:t.image,animation_url:t.animationUrl,external_url:t.externalUrl,attributes:t.attributes,properties:{...t.properties,creators:t.creators?.map(e=>({address:e.address,share:e.share}))}},i=[...e,new File([JSON.stringify(n)],"metadata.json")];return i}(o,p),h=await J(s,m);return{instructions:h,signers:[],output:{files:m}}}async presignCreateArweaveUrl(e){let{output:{files:t},instructions:n,signers:i}=await this.presignCreateArweaveUrlInstructions(e),r=await this.sendInstructions(n,i);return{files:t,txid:r}}async getArweaveUrl({txid:e,mint:t,files:n=[],uploadUrl:i=$,env:r="mainnet-beta"}){let a=await Y(e,t,n,i,r),o=a.messages?.find(e=>"manifest.json"===e.filename);if(!o)throw Error("Metadata file not found");return`https://arweave.net/${o.transactionId}`}async createMasterEditionInstructions({mint:e,mintAuthority:t=this.provider.wallet.publicKey,payer:n=this.provider.wallet.publicKey}){let i=await o.Metadata.getPDA(e),r=await o.MasterEdition.getPDA(e),a=new o.CreateMasterEditionV3({feePayer:n},{edition:r,metadata:i,mint:e,mintAuthority:t,updateAuthority:t,maxSupply:new s.BN(0)}).instructions;return{instructions:a,signers:[],output:{metadata:i}}}async createMasterEdition(e){let{instructions:t,signers:n,output:i}=await this.createMasterEditionInstructions(e);return await this.sendInstructions(t,n,e.payer),i}async verifyCollectionInstructions({nftMint:e,collectionMint:t,payer:n=this.provider.wallet.publicKey}){let i=await o.Metadata.getPDA(e),r=await o.Metadata.getPDA(t),a=await o.MasterEdition.getPDA(t),s=new o.VerifyCollection({feePayer:n},{metadata:i,collectionAuthority:this.provider.wallet.publicKey,collectionMint:t,collectionMetadata:r,collectionMasterEdition:a}).instructions;return{instructions:s,signers:[],output:{metadata:i}}}async verifyCollection(e){let{instructions:t,signers:n,output:i}=await this.verifyCollectionInstructions(e);return await this.sendInstructions(t,n,e.payer),i}async createMetadataInstructions({data:e,authority:t=this.provider.wallet.publicKey,mint:n,mintAuthority:i=this.provider.wallet.publicKey,payer:r=this.provider.wallet.publicKey}){let a=await o.Metadata.getPDA(n),s=new o.CreateMetadataV2({feePayer:r},{metadata:a,mint:n,metadataData:new o.DataV2({...e}),mintAuthority:i,updateAuthority:t}).instructions;return{instructions:s,signers:[],output:{metadata:a}}}async getMetadata(e){let t=await this.provider.connection.getAccountInfo(e);return t&&new o.Metadata(e,t).data}async createMetadata(e){let{instructions:t,signers:n,output:i}=await this.createMetadataInstructions(e);return await this.sendInstructions(t,n,e.payer),i}async updateMetadataInstructions({data:e,newAuthority:t,metadata:n,updateAuthority:i}){let r=await this.getMetadata(n),a=new o.UpdateMetadataV2({},{metadata:n,metadataData:new o.DataV2(e?{...e}:{...r.data,collection:r?.collection,uses:r?.uses}),updateAuthority:i||new c.PublicKey(r.updateAuthority),newUpdateAuthority:void 0===t?new c.PublicKey(r.updateAuthority):t||void 0,primarySaleHappened:null,isMutable:null}).instructions;return{instructions:a,signers:[],output:{metadata:n}}}async updateMetadata(e){let{instructions:t,signers:n,output:i}=await this.updateMetadataInstructions(e);return await this.sendInstructions(t,n,e.payer),i}}function ei(e,t){return e.equals(u.NATIVE_MINT)?t:e}class er{parent;child;tokenBonding;pricingCurve;wrappedSolMint;constructor({parent:e,child:t,tokenBonding:n,pricingCurve:i,wrappedSolMint:r}){this.parent=e,this.child=t,this.tokenBonding=n,this.pricingCurve=i,this.wrappedSolMint=r}toArray(){let e=[],t=this;do e.push(t),t=t?.parent;while(t);return e}lowestOrUndefined(e,t){return this.toArray().find(n=>n.tokenBonding.targetMint.equals(ei(e,this.wrappedSolMint))||n.tokenBonding.targetMint.equals(ei(t,this.wrappedSolMint)))?.tokenBonding?.targetMint}lowest(e,t){let n=this.lowestOrUndefined(e,t);if(!n)throw Error(`No bonding found with target mint ${e.toBase58()} or ${t.toBase58()}`);return n}highestOrUndefined(e,t){return this.toArray().find(n=>n.tokenBonding.baseMint.equals(ei(e,this.wrappedSolMint))||n.tokenBonding.baseMint.equals(ei(t,this.wrappedSolMint)))?.tokenBonding?.baseMint}highest(e,t){let n=this.highestOrUndefined(e,t);if(!n)throw Error(`No bonding found with target mint ${e.toBase58()} or ${t.toBase58()}`);return n}path(e,t,n=!1){let i=this.lowestOrUndefined(e,t);if(!i)return[];let r=i.equals(e)?ei(t,this.wrappedSolMint):ei(e,this.wrappedSolMint),a=this.toArray(),o=a.findIndex(e=>e.tokenBonding.targetMint.equals(i)),s=a.findIndex(e=>e.tokenBonding.baseMint.equals(r)),u=i.equals(t),c=a.slice(o,s+1);return n||c.every(e=>u?!e.tokenBonding.buyFrozen:!e.tokenBonding.sellFrozen)?c:[]}findTarget(e){return this.toArray().find(t=>t.tokenBonding.targetMint.equals(e)).tokenBonding}contains(...e){let t=new Set(this.toArray().flatMap(e=>[e.tokenBonding.baseMint.toBase58(),e.tokenBonding.targetMint.toBase58()]));return e.every(e=>t.has(ei(e,this.wrappedSolMint).toBase58()))}}let ea=function(e,t){return B().isBN(e)?E(e,t):e},eo=function(e,t){let n="number"==typeof t?t:t.decimals;return B().isBN(e)?e:new(B())(Math.ceil(Number(e)*Math.pow(10,n)).toLocaleString("fullwide",{useGrouping:!1}))};function es(e){return e/4294967295}function eu(e,t){return!t||e>t.interval?0:es(t.percentage)*((t.interval-e)/t.interval)}function ec(){return new Date().valueOf()/1e3}class el{curve;baseAmount;targetSupply;goLiveUnixTime;constructor({curve:e,baseAmount:t,targetSupply:n,goLiveUnixTime:i}){this.curve=e,this.baseAmount=t,this.targetSupply=n,this.goLiveUnixTime=i}currentCurve(e=ec()){let t;return{subCurve:(t=e<this.goLiveUnixTime?this.curve.definition.timeV0.curves[0]:[...this.curve.definition.timeV0.curves].reverse().find(t=>e>=this.goLiveUnixTime+t.offset.toNumber())).curve.exponentialCurveV0?new eg(t.curve.exponentialCurveV0,this.baseAmount,this.targetSupply,this.goLiveUnixTime+t.offset.toNumber()):new ep(t.curve.timeDecayExponentialCurveV0,this.baseAmount,this.targetSupply,this.goLiveUnixTime+t.offset.toNumber()),offset:t.offset.toNumber(),buyTransitionFees:t.buyTransitionFees,sellTransitionFees:t.sellTransitionFees}}current(e=ec(),t=0,n=0){let{subCurve:i,buyTransitionFees:r,offset:a}=this.currentCurve(e);return i.current(e,t,n)*(1-eu(e-a,r))}locked(){return this.currentCurve().subCurve.locked()}sellTargetAmount(e,t,n,i=ec()){let{subCurve:r,sellTransitionFees:a,offset:o}=this.currentCurve(i),s=r.sellTargetAmount(e,t,n,i);return s*(1-eu(i-this.goLiveUnixTime-o,a))}buyTargetAmount(e,t,n,i=ec()){let{subCurve:r,buyTransitionFees:a,offset:o}=this.currentCurve(i),s=r.buyTargetAmount(e,t,n,i);return s*(1+eu(i-this.goLiveUnixTime-o,a))}buyWithBaseAmount(e,t,n,i=ec()){let{subCurve:r,buyTransitionFees:a,offset:o}=this.currentCurve(i),s=e*(1-eu(i-this.goLiveUnixTime-o,a));return r.buyWithBaseAmount(s,t,n)}}class ed{c;baseAmount;targetSupply;goLiveUnixTime;constructor(e,t,n,i){this.c=e,this.baseAmount=t,this.targetSupply=n,this.goLiveUnixTime=i}current(e,t=0,n=0){return this.changeInTargetAmount(1,t,n,e)}locked(){return this.baseAmount}changeInTargetAmount(e,t,n,i=ec()){let r=this.baseAmount,a=this.targetSupply,o=this.k(i-this.goLiveUnixTime),s=e*(1/(1-es(n)));if(0==r||0==a)return(this.b*s+this.c*Math.pow(s,1+o)/(1+o))*(1/(1-es(t)));if(0==this.b&&0!=this.c)return r/Math.pow(a,1+o)*((a+s)*Math.pow(a+s,o)-Math.pow(a,1+o))*(1/(1-es(t)));if(0==this.c)return r*s/a*(1/(1-es(t)));throw Error("Cannot convert base amount to target amount when both b and k are defined on an exponential curve. The math is too hard")}sellTargetAmount(e,t,n,i=ec()){return-this.changeInTargetAmount(-e*(1-es(n)),0,0,i)*(1-es(t))}buyTargetAmount(e,t,n,i=ec()){return this.changeInTargetAmount(e,t,n,i)}buyWithBaseAmount(e,t,n,i=ec()){let r=this.k(i-this.goLiveUnixTime),a=e*(1-es(t));if(0==this.baseAmount||0==this.targetSupply){if(0==this.b)return(Math.pow((1+r)*a/this.c,1/(1+r))-this.targetSupply)*(1-es(n));if(0==this.c)return 0==this.baseAmount?a/this.b*(1-es(n)):this.targetSupply*a/this.baseAmount*(1-es(n));throw Error("Cannot convert base amount to target amount when both b and k are defined on an exponential curve. The math is too hard")}{let e=this.baseAmount,t=this.targetSupply;if(0==this.b)return(-t+Math.pow(Math.pow(t,1+r)*(e+a)/e,1/(1+r)))*(1-es(n));if(0==this.c)return t*a/e*(1-es(n));throw Error("Cannot convert base amount to target amount when both b and k are defined on an exponential curve. The math is too hard")}}}class eg extends ed{b;_k;pow;frac;k(e=ec()){return this._k}constructor(e,t,n,i=ec()){super(+e.c.toString()/1e12,t,n,i),this.b=+e.b.toString()/1e12,this._k=e.pow/e.frac,this.pow=e.pow,this.frac=e.frac,this.baseAmount=t,this.targetSupply=n}}class ep extends ed{b=0;k0;k1;d;interval;k(e){let t=this.k0-(this.k0-this.k1)*Math.min(Math.pow(e/this.interval,this.d),1);return t}constructor(e,t,n,i){super(+e.c.toString()/1e12,t,n,i),this.k1=+e.k1.toString()/1e12,this.k0=+e.k0.toString()/1e12,this.d=+e.d.toString()/1e12,this.interval=e.interval,this.baseAmount=t,this.targetSupply=n}}function em({hierarchy:e,func:t,initial:n,destination:i,wrappedSolMint:r}){if(!e||e.child?.tokenBonding.baseMint.equals(i))return n;i?.equals(u.NATIVE_MINT)&&(i=r);let a=e,o=t(n,a);for(;!a.tokenBonding.baseMint.equals(i);){if(!(a=a.parent))throw Error(`Base mint ${i.toBase58()} is not in the hierarchy for ${e.tokenBonding.publicKey.toBase58()}`);o=t(o,a)}return o}function eh(){return new Date().valueOf()/1e3}class ey{hierarchy;constructor(e){this.hierarchy=e.hierarchy}current(e,t){return em({hierarchy:this.hierarchy,func:(e,n)=>e*n.pricingCurve.current(t||eh(),n.tokenBonding.buyBaseRoyaltyPercentage,n.tokenBonding.buyTargetRoyaltyPercentage),initial:1,destination:e||this.hierarchy.tokenBonding.baseMint,wrappedSolMint:this.hierarchy.wrappedSolMint})}locked(e){return em({hierarchy:this.hierarchy.parent,func:(e,t)=>e*t.pricingCurve.current(eh(),t.tokenBonding.buyBaseRoyaltyPercentage,t.tokenBonding.buyTargetRoyaltyPercentage),initial:this.hierarchy.pricingCurve.locked(),destination:e||this.hierarchy.tokenBonding.baseMint,wrappedSolMint:this.hierarchy.wrappedSolMint})}swap(e,t,n,i=!1,r){let a=this.hierarchy.lowest(t,n),o=this.hierarchy.highest(t,n),s=this.isBuying(a,n),u=this.hierarchy.path(a,o,i);if(0==u.length)throw Error(`No path from ${t} to ${n}`);return s?u.reverse().reduce((e,{pricingCurve:t,tokenBonding:n})=>t.buyWithBaseAmount(e,n.buyBaseRoyaltyPercentage,n.buyTargetRoyaltyPercentage,r),e):u.reduce((e,{pricingCurve:t,tokenBonding:n})=>t.sellTargetAmount(e,n.sellBaseRoyaltyPercentage,n.sellTargetRoyaltyPercentage,r),e)}isBuying(e,t){return e.equals(t)}swapTargetAmount(e,t,n,i=!1,r){let a=this.hierarchy.lowest(t,n),o=this.hierarchy.highest(t,n),s=this.isBuying(a,n),u=this.hierarchy.path(a,o,i);if(0==u.length)throw Error(`No path from ${t} to ${n}`);return s?u.reverse().reduce((e,{pricingCurve:t,tokenBonding:n})=>t.buyWithBaseAmount(-e,n.sellBaseRoyaltyPercentage,n.sellTargetRoyaltyPercentage,r),e):u.reverse().reduce((e,{pricingCurve:t,tokenBonding:n})=>t.buyTargetAmount(e,n.buyBaseRoyaltyPercentage,n.buyTargetRoyaltyPercentage,r),e)}sellTargetAmount(e,t,n){return em({hierarchy:this.hierarchy,func:(e,t)=>t.pricingCurve.sellTargetAmount(e,t.tokenBonding.sellBaseRoyaltyPercentage,t.tokenBonding.sellTargetRoyaltyPercentage,n),initial:e,destination:t||this.hierarchy.tokenBonding.baseMint,wrappedSolMint:this.hierarchy.wrappedSolMint})}buyTargetAmount(e,t,n){return em({hierarchy:this.hierarchy,func:(e,t)=>t.pricingCurve.buyTargetAmount(e,t.tokenBonding.buyBaseRoyaltyPercentage,t.tokenBonding.buyTargetRoyaltyPercentage,n),initial:e,destination:t||this.hierarchy.tokenBonding.baseMint,wrappedSolMint:this.hierarchy.wrappedSolMint})}buyWithBaseAmount(e,t,n){return function({hierarchy:e,func:t,initial:n,destination:i,wrappedSolMint:r}){if(!e)return n;i?.equals(u.NATIVE_MINT)&&(i=r);let a=e;for(;!a.tokenBonding.baseMint.equals(i);)if(!(a=a.parent))throw Error(`Base mint ${i.toBase58()} is not in the hierarchy for ${e.tokenBonding.publicKey.toBase58()}`);i=e.tokenBonding.targetMint;let o=t(n,a);for(;!a.tokenBonding.targetMint.equals(i);)o=t(o,a=a.child);return o}({hierarchy:this.hierarchy,func:(e,t)=>t.pricingCurve.buyWithBaseAmount(e,t.tokenBonding.buyBaseRoyaltyPercentage,t.tokenBonding.buyTargetRoyaltyPercentage,n),initial:e,destination:t||this.hierarchy.tokenBonding.baseMint,wrappedSolMint:this.hierarchy.wrappedSolMint})}}var ef=n(15313).Buffer;async function ew(e){return new Promise(t=>setTimeout(t,e))}function eb(...e){return e.some(e=>void 0!==e)}function ev(e,t){return void 0===e?t:e}class eA extends P{state;static ID=new c.PublicKey("TBondmkCYxaPCKG4CHYfVTcwQ8on31xnJrPzk8F8WsS");static async init(e,t=eA.ID){let n=await s.Program.fetchIdl(t,e),i=new s.Program(n,t,e);return new this(e,i)}constructor(e,t){super({provider:e,program:t})}curveDecoder=(e,t)=>{let n=this.program.coder.accounts.decode("CurveV0",t.data);return{...n,publicKey:e}};tokenBondingDecoder=(e,t)=>{let n=this.program.coder.accounts.decode("TokenBondingV0",t.data);return{...n,publicKey:e}};getTokenBonding(e){return this.getAccount(e,this.tokenBondingDecoder)}getCurve(e){return this.getAccount(e,this.curveDecoder)}async initializeSolStorageInstructions({mintKeypair:e}){let t=await this.getState();if(t)return{output:null,instructions:[],signers:[]};console.log("Sol storage does not exist, creating...");let[n,i]=await c.PublicKey.findProgramAddress([ef.from("state","utf-8")],this.programId),[r,a]=await c.PublicKey.findProgramAddress([ef.from("sol-storage","utf-8")],this.programId),[s,l]=await c.PublicKey.findProgramAddress([ef.from("wrapped-sol-authority","utf-8")],this.programId),d=[],g=[];return g.push(e),d.push(...[c.SystemProgram.createAccount({fromPubkey:this.wallet.publicKey,newAccountPubkey:e.publicKey,space:82,lamports:await this.provider.connection.getMinimumBalanceForRentExemption(82),programId:u.TOKEN_PROGRAM_ID}),u.Token.createInitMintInstruction(u.TOKEN_PROGRAM_ID,e.publicKey,9,this.wallet.publicKey,s)]),d.push(...new o.CreateMetadataV2({feePayer:this.wallet.publicKey},{metadata:await o.Metadata.getPDA(e.publicKey),mint:e.publicKey,metadataData:new o.DataV2({name:"Token Bonding Wrapped SOL",symbol:"twSOL",uri:"",sellerFeeBasisPoints:0,creators:null,collection:null,uses:null}),mintAuthority:this.wallet.publicKey,updateAuthority:this.wallet.publicKey}).instructions),d.push(u.Token.createSetAuthorityInstruction(u.TOKEN_PROGRAM_ID,e.publicKey,s,"MintTokens",this.wallet.publicKey,[])),d.push(await this.instruction.initializeSolStorageV0({solStorageBumpSeed:a,bumpSeed:i,mintAuthorityBumpSeed:l},{accounts:{state:n,payer:this.wallet.publicKey,solStorage:r,mintAuthority:s,wrappedSolMint:e.publicKey,tokenProgram:u.TOKEN_PROGRAM_ID,systemProgram:c.SystemProgram.programId,rent:c.SYSVAR_RENT_PUBKEY}})),{instructions:d,signers:g,output:null}}initializeSolStorage({mintKeypair:e}){return this.execute(this.initializeSolStorageInstructions({mintKeypair:e}))}async initializeCurveInstructions({payer:e=this.wallet.publicKey,config:t,curveKeypair:n=s.web3.Keypair.generate()}){let i=t.toRawConfig();return{output:{curve:n.publicKey},signers:[n],instructions:[c.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:n.publicKey,space:500,lamports:await this.provider.connection.getMinimumBalanceForRentExemption(500),programId:this.programId}),await this.instruction.createCurveV0(i,{accounts:{payer:e,curve:n.publicKey,systemProgram:c.SystemProgram.programId,rent:c.SYSVAR_RENT_PUBKEY}})]}}async initializeCurve(e,t="confirmed"){return(await this.execute(this.initializeCurveInstructions(e),e.payer,t)).curve}static async tokenBondingKey(e,t=0,n=eA.ID){let i=ef.alloc(2);return new(B())(t,16,"le").toArrayLike(ef).copy(i),c.PublicKey.findProgramAddress([ef.from("token-bonding","utf-8"),e.toBuffer(),i],n)}static async wrappedSolMintAuthorityKey(e=eA.ID){return c.PublicKey.findProgramAddress([ef.from("wrapped-sol-authority","utf-8")],e)}async createTokenBondingInstructions({generalAuthority:e=this.wallet.publicKey,curveAuthority:t=null,reserveAuthority:n=null,payer:i=this.wallet.publicKey,curve:r,baseMint:a,targetMint:o,buyBaseRoyalties:g,buyBaseRoyaltiesOwner:p=this.wallet.publicKey,buyTargetRoyalties:m,buyTargetRoyaltiesOwner:h=this.wallet.publicKey,sellBaseRoyalties:y,sellBaseRoyaltiesOwner:f=this.wallet.publicKey,sellTargetRoyalties:w,sellTargetRoyaltiesOwner:b=this.wallet.publicKey,buyBaseRoyaltyPercentage:v=0,buyTargetRoyaltyPercentage:A=0,sellBaseRoyaltyPercentage:S=0,sellTargetRoyaltyPercentage:M=0,mintCap:T,purchaseCap:P,goLiveDate:k,freezeBuyDate:I,targetMintDecimals:E,targetMintKeypair:C=c.Keypair.generate(),buyFrozen:O=!1,ignoreExternalReserveChanges:_=!1,ignoreExternalSupplyChanges:x=!1,sellFrozen:K=!1,index:N,advanced:D={initialSupplyPad:0,initialReservesPad:0}}){if(!o){if(w||m)throw Error("Cannot define target royalties if mint is not defined");if(void 0===E)throw Error("Cannot define mint without decimals ")}k||(k=new Date(0)).setUTCSeconds(await this.getUnixTime()-10);let V=this.provider,U=await this.getState(),L=a.equals(u.NATIVE_MINT)||a.equals(U.wrappedSolMint);L&&(a=U.wrappedSolMint);let z=[],F=[],G=!1;o||(F.push(C),o=C.publicKey,G=!0);let q=N||0,j=()=>eA.tokenBondingKey(o,q),W=async()=>this.provider.connection.getAccountInfo((await j())[0]);if(N)q=N;else for(;await W();)q++;let[$,H]=await eA.tokenBondingKey(o,q);G&&z.push(...await l(V,$,o,E));let Y=s.web3.Keypair.generate();F.push(Y);let J=Y.publicKey;z.push(c.SystemProgram.createAccount({fromPubkey:i,newAccountPubkey:J,space:u.AccountLayout.span,programId:u.TOKEN_PROGRAM_ID,lamports:await this.provider.connection.getMinimumBalanceForRentExemption(u.AccountLayout.span)}),u.Token.createInitAccountInstruction(u.TOKEN_PROGRAM_ID,a,J,$)),L&&(g=null===g?null:g||p,y=null===y?null:y||f);let X=new Set;void 0!==m||(m=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,o,h,!0),X.has(m.toBase58())||await this.accountExists(m)||(console.log("Creating buy target royalties..."),z.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,o,m,h,i)),X.add(m.toBase58()))),void 0!==w||(w=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,o,b,!0),X.has(w.toBase58())||await this.accountExists(w)||(console.log("Creating sell target royalties..."),z.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,o,w,b,i)),X.add(m.toBase58()))),void 0!==g||(g=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,a,p,!0),X.has(g.toBase58())||await this.accountExists(g)||(console.log("Creating base royalties...",g.toBase58()),z.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,a,g,p,i)),X.add(g.toBase58()))),void 0!==y||(y=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,a,f,!0),X.has(y.toBase58())||await this.accountExists(y)||(console.log("Creating base royalties...",y.toBase58()),z.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,a,y,f,i)),X.add(y.toBase58())));let Z={initialReservesPad:D.initialReservesPad?eo(D.initialReservesPad,await d(this.provider,a)):new(B())(0),initialSupplyPad:D.initialSupplyPad?eo(D.initialSupplyPad,void 0===E?(await d(this.provider,o)).decimals:E):new(B())(0)};return z.push(await this.instruction.initializeTokenBondingV0({index:q,goLiveUnixTime:new(B())(Math.floor(k.valueOf()/1e3)),freezeBuyUnixTime:I?new(B())(Math.floor(I.valueOf()/1e3)):null,buyBaseRoyaltyPercentage:R(v)||0,buyTargetRoyaltyPercentage:R(A)||0,sellBaseRoyaltyPercentage:R(S)||0,sellTargetRoyaltyPercentage:R(M)||0,mintCap:T||null,purchaseCap:P||null,generalAuthority:e,curveAuthority:t,reserveAuthority:n,bumpSeed:H,buyFrozen:O,ignoreExternalReserveChanges:_,ignoreExternalSupplyChanges:x,sellFrozen:K,...Z},{accounts:{payer:i,curve:r,tokenBonding:$,baseMint:a,targetMint:o,baseStorage:J,buyBaseRoyalties:null===g?this.wallet.publicKey:g,buyTargetRoyalties:null===m?this.wallet.publicKey:m,sellBaseRoyalties:null===y?this.wallet.publicKey:y,sellTargetRoyalties:null===w?this.wallet.publicKey:w,tokenProgram:u.TOKEN_PROGRAM_ID,systemProgram:c.SystemProgram.programId,rent:c.SYSVAR_RENT_PUBKEY,clock:c.SYSVAR_CLOCK_PUBKEY}})),{output:{baseMint:a,tokenBonding:$,targetMint:o,buyBaseRoyalties:g||this.wallet.publicKey,buyTargetRoyalties:m||this.wallet.publicKey,sellBaseRoyalties:y||this.wallet.publicKey,sellTargetRoyalties:w||this.wallet.publicKey,baseStorage:J},instructions:z,signers:F}}async accountExists(e){return Boolean(await this.provider.connection.getAccountInfo(e))}createTokenBonding(e,t="confirmed"){return this.execute(this.createTokenBondingInstructions(e),e.payer,t)}async getUnixTime(){let e=await this.provider.connection.getAccountInfo(c.SYSVAR_CLOCK_PUBKEY);return Number(e.data.readBigInt64LE(32))}async updateCurveInstructions({tokenBonding:e,curve:t}){let n=await this.getTokenBonding(e);if(!n)throw Error("Token bonding does not exist");if(!n.curveAuthority)throw Error("No curve authority on this bonding curve");return{output:null,signers:[],instructions:[await this.instruction.updateCurveV0({curveAuthority:n.curveAuthority},{accounts:{tokenBonding:e,curveAuthority:n.curveAuthority,curve:t}})]}}async updateCurve(e,t="confirmed"){await this.execute(this.updateCurveInstructions(e),this.wallet.publicKey,t)}async updateTokenBondingInstructions({tokenBonding:e,buyBaseRoyaltyPercentage:t,buyTargetRoyaltyPercentage:n,sellBaseRoyaltyPercentage:i,sellTargetRoyaltyPercentage:r,buyBaseRoyalties:a,buyTargetRoyalties:o,sellBaseRoyalties:s,sellTargetRoyalties:u,generalAuthority:c,reserveAuthority:l,buyFrozen:d}){let g=await this.getTokenBonding(e),p=eb(t,n,i,r,a,o,s,u,c,d),m=eb(l),h=[];if(p){if(!g.generalAuthority)throw Error("Cannot update a token bonding account that has no authority");let l={buyBaseRoyaltyPercentage:ev(R(t),g.buyBaseRoyaltyPercentage),buyTargetRoyaltyPercentage:ev(R(n),g.buyTargetRoyaltyPercentage),sellBaseRoyaltyPercentage:ev(R(i),g.sellBaseRoyaltyPercentage),sellTargetRoyaltyPercentage:ev(R(r),g.sellTargetRoyaltyPercentage),generalAuthority:null===c?null:c||g.generalAuthority,buyFrozen:void 0===d?g.buyFrozen:d};h.push(await this.instruction.updateTokenBondingV0(l,{accounts:{tokenBonding:e,generalAuthority:g.generalAuthority,baseMint:g.baseMint,targetMint:g.targetMint,buyTargetRoyalties:o||g.buyTargetRoyalties,buyBaseRoyalties:a||g.buyBaseRoyalties,sellTargetRoyalties:u||g.sellTargetRoyalties,sellBaseRoyalties:s||g.sellBaseRoyalties}}))}if(m){if(!g.reserveAuthority)throw Error("Cannot update reserve authority of a token bonding account that has no reserve authority");h.push(await this.instruction.updateReserveAuthorityV0({newReserveAuthority:l||null},{accounts:{tokenBonding:e,reserveAuthority:g.reserveAuthority}}))}return{output:null,signers:[],instructions:h}}async updateTokenBonding(e,t="confirmed"){await this.execute(this.updateTokenBondingInstructions(e),this.wallet.publicKey,t)}async buyBondingWrappedSolInstructions({payer:e=this.wallet.publicKey,destination:t,source:n=this.wallet.publicKey,amount:i}){let r=await this.getState(),a=(await c.PublicKey.findProgramAddress([ef.from("state","utf-8")],this.programId))[0],o=(await eA.wrappedSolMintAuthorityKey(this.programId))[0],s=await d(this.provider,r.wrappedSolMint),l=!1;t||(t=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,r.wrappedSolMint,n,!0),l=!0);let g=[];return l&&!await this.accountExists(t)&&g.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,r.wrappedSolMint,t,n,e)),g.push(await this.instruction.buyWrappedSolV0({amount:eo(i,s)},{accounts:{state:a,wrappedSolMint:r.wrappedSolMint,mintAuthority:o,solStorage:r.solStorage,source:n,destination:t,tokenProgram:u.TOKEN_PROGRAM_ID,systemProgram:c.SystemProgram.programId}})),{signers:[],output:{destination:t},instructions:g}}buyBondingWrappedSol(e,t="confirmed"){return this.execute(this.buyBondingWrappedSolInstructions(e),e.payer,t)}async sellBondingWrappedSolInstructions({source:e,owner:t=this.wallet.publicKey,destination:n=this.wallet.publicKey,amount:i,all:r=!1}){let a=await this.getState(),o=(await c.PublicKey.findProgramAddress([ef.from("state","utf-8")],this.programId))[0],s=await d(this.provider,a.wrappedSolMint);e||(e=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,a.wrappedSolMint,t,!0));let l=[];return l.push(await this.instruction.sellWrappedSolV0({amount:eo(i,s),all:r},{accounts:{state:o,wrappedSolMint:a.wrappedSolMint,solStorage:a.solStorage,source:e,owner:t,destination:n,tokenProgram:u.TOKEN_PROGRAM_ID,systemProgram:c.SystemProgram.programId}})),r&&l.push(u.Token.createCloseAccountInstruction(u.TOKEN_PROGRAM_ID,e,n,t,[])),{signers:[],output:null,instructions:l}}async sellBondingWrappedSol(e,t="confirmed"){return this.execute(this.sellBondingWrappedSolInstructions(e),e.payer,t)}async buyInstructions({tokenBonding:e,source:t,sourceAuthority:n=this.wallet.publicKey,destination:i,desiredTargetAmount:r,baseAmount:a,expectedOutputAmount:o,expectedBaseAmount:s,slippage:l,payer:p=this.wallet.publicKey}){let m=await this.getState(),h=await this.getTokenBonding(e),y=h.baseMint.equals(u.NATIVE_MINT)||h.baseMint.equals(m.wrappedSolMint),f=await d(this.provider,h.targetMint),w=await d(this.provider,h.baseMint),b=await g(this.provider,h.baseStorage),v=await this.getPricingCurve(h.curve,E(h.ignoreExternalReserveChanges?h.reserveBalanceFromBonding:b.amount,w),E(h.ignoreExternalSupplyChanges?h.supplyFromBonding:f.supply,f),h.goLiveUnixTime.toNumber()),A=[];i||await this.accountExists(i=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,h.targetMint,n,!0))||(console.log("Creating target account"),A.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,h.targetMint,i,n,p)));let S=null,M=null,T=0,P=await this.getUnixTime();if(r){let e=ea(r,f),t=e*(1/(1-es(h.buyTargetRoyaltyPercentage))),n=s?ea(s,f):v.buyTargetAmount(e,h.buyBaseRoyaltyPercentage,h.buyTargetRoyaltyPercentage,P);T=n*(1+l),S={targetAmount:new(B())(Math.floor(t*Math.pow(10,f.decimals))),maximumPrice:eo(T,w)}}if(a){let e=ea(a,w);T=e;let t=o?ea(o,f):v.buyWithBaseAmount(e,h.buyBaseRoyaltyPercentage,h.buyTargetRoyaltyPercentage,P);M={baseAmount:eo(a,w),minimumTargetAmount:new(B())(Math.ceil(t*(1-l)*Math.pow(10,f.decimals)))}}t||(y?t=n:await this.accountExists(t=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,h.baseMint,n,!0))||console.warn("Source account for bonding buy does not exist, if it is not created in an earlier instruction this can cause an error"));let R={buyTargetAmount:S,buyWithBase:M},k={tokenBonding:e,curve:h.curve,baseMint:h.baseMint,targetMint:h.targetMint,baseStorage:h.baseStorage,buyBaseRoyalties:h.buyBaseRoyalties,buyTargetRoyalties:h.buyTargetRoyalties,tokenProgram:u.TOKEN_PROGRAM_ID,clock:c.SYSVAR_CLOCK_PUBKEY,destination:i};return y?A.push(await this.instruction.buyNativeV0(R,{accounts:{common:k,state:m.publicKey,wrappedSolMint:m.wrappedSolMint,mintAuthority:(await eA.wrappedSolMintAuthorityKey(this.programId))[0],solStorage:m.solStorage,systemProgram:c.SystemProgram.programId,source:t}})):A.push(await this.instruction.buyV1(R,{accounts:{common:k,state:m.publicKey,source:t,sourceAuthority:n}})),{output:null,signers:[],instructions:A}}async buy(e,t="confirmed"){await this.execute(this.buyInstructions(e),e.payer,t)}async getTokenAccountBalance(e,t="confirmed"){let n=await this.provider.connection.getAccountInfo(e,t);return n?u.u64.fromBuffer(u.AccountLayout.decode(n.data).amount):new(B())(0)}async swap({payer:e=this.wallet.publicKey,sourceAuthority:t=this.wallet.publicKey,baseMint:n,targetMint:i,baseAmount:r,expectedBaseAmount:a,desiredTargetAmount:s,expectedOutputAmount:c,slippage:l,balanceCheckTries:g=5,extraInstructions:p=()=>Promise.resolve({instructions:[],signers:[],output:null}),preInstructions:m=async()=>({instructions:[],signers:[],output:null}),postInstructions:h=()=>Promise.resolve({instructions:[],signers:[],output:null}),entangled:y=null}){let f=await this.getBondingHierarchy((await eA.tokenBondingKey(i))[0],n),w=await this.getBondingHierarchy((await eA.tokenBondingKey(n))[0],i),b=[f,w].find(e=>e?.contains(n,i));if(!b)throw Error(`No bonding curve hierarchies found for base or target that contain both ${n.toBase58()} and ${i.toBase58()}`);let v=b.tokenBonding.targetMint.equals(i),A=b?.toArray()||[],S=await d(this.provider,n),M=r?eo(r,S):void 0,T=v?A.reverse():A,P=[];for(let[n,i]of T.entries()){let r,f,w;let b=n===A.length-1,S=i.tokenBonding,T=S.baseMint.equals((await this.getState())?.wrappedSolMint),k=y&&v?y:v?S.targetMint:S.baseMint,I=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,k,t,!0),E=async()=>{if(v||!T)return this.getTokenAccountBalance(I,"single");{let e=(await this.provider.connection.getAccountInfo(t,"single"))?.lamports||0;return new(B())(e)}},C=await E();v?(console.log(`Actually doing ${S.baseMint.toBase58()} to ${S.targetMint.toBase58()}`),{instructions:r,signers:f}=await this.buyInstructions({payer:e,sourceAuthority:t,baseAmount:M,tokenBonding:S.publicKey,expectedOutputAmount:b&&!s?c:void 0,desiredTargetAmount:b&&s?s:void 0,expectedBaseAmount:b&&s?a:void 0,slippage:l}),w=S.targetMint):(console.log(`SELL doing ${S.baseMint.toBase58()} to ${S.targetMint.toBase58()}`),{instructions:r,signers:f}=await this.sellInstructions({payer:e,sourceAuthority:t,targetAmount:M,tokenBonding:S.publicKey,expectedOutputAmount:b?c:void 0,slippage:l}),w=S.baseMint);let{instructions:O,signers:_}=await p({tokenBonding:S,amount:M,isBuy:v}),{instructions:x,signers:K}=await m({tokenBonding:S,amount:M,desiredTargetAmount:s,isBuy:v,isFirst:0==n}),{instructions:N,signers:D}=await h({isLast:b,amount:c,isBuy:v});try{await this.sendInstructions([...O,...x,...r,...N],[..._,...K,...f,...D],e)}catch(e){if(P.length>0){let t=await en.init(this.provider),n=P[P.length-1],i=await o.Metadata.getPDA(n),r=await t.getMetadata(i),a=r?.data.symbol||n.toBase58(),s=Error(`Swap partially failed, check your wallet for ${a} tokens. Error: ${e.toString()}`);throw s.stack=e.stack,s}throw e}async function R(e=0){if(e>g)return new(B())(0);let t=await E();return t.eq(C)?(console.log("No balance change detected while swapping, trying again",e),await ew(5e3),R(e+1)):t}P.push(w);let V=await R();if((M=V.sub(C||new(B())(0))).eq(new(B())(0))){let e=await d(this.provider,v?S.targetMint:S.baseMint);return{targetAmount:ea(V,e)-ea(C,e)}}}let k=await d(this.provider,i);return{targetAmount:ea(M,k)}}async getState(){if(this.state)return this.state;let e=(await c.PublicKey.findProgramAddress([ef.from("state","utf-8")],this.programId))[0],t=await this.account.programStateV0.fetchNullable(e),n=t?{...t,publicKey:e}:null;return n&&(this.state=n),n}async sellInstructions({tokenBonding:e,source:t,sourceAuthority:n=this.wallet.publicKey,destination:i,targetAmount:r,expectedOutputAmount:a,slippage:o,payer:s=this.wallet.publicKey}){let l=await this.getState(),p=await this.getTokenBonding(e);if(p.sellFrozen)throw Error("Sell is frozen on this bonding curve");let m=p.baseMint.equals(u.NATIVE_MINT)||p.baseMint.equals(l.wrappedSolMint),h=await d(this.provider,p.targetMint),y=await d(this.provider,p.baseMint),f=await g(this.provider,p.baseStorage),w=await this.getPricingCurve(p.curve,E(p.ignoreExternalReserveChanges?p.reserveBalanceFromBonding:f.amount,y),E(p.ignoreExternalSupplyChanges?p.supplyFromBonding:h.supply,h),p.goLiveUnixTime.toNumber()),b=[];t||await this.accountExists(t=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,p.targetMint,n,!0))||console.warn("Source account for bonding buy does not exist, if it is not created in an earlier instruction this can cause an error"),i||(m?i=n:await this.accountExists(i=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,p.baseMint,n,!0))||(console.log("Creating base account"),b.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,p.baseMint,i,n,s))));let v=await this.getUnixTime(),A=ea(r,h),S=a?ea(a,y):w.sellTargetAmount(A,p.sellBaseRoyaltyPercentage,p.sellTargetRoyaltyPercentage,v),M={targetAmount:eo(r,h),minimumPrice:new(B())(Math.ceil(S*(1-o)*Math.pow(10,y.decimals)))},T={tokenBonding:e,curve:p.curve,baseMint:p.baseMint,targetMint:p.targetMint,baseStorage:p.baseStorage,sellBaseRoyalties:p.sellBaseRoyalties,sellTargetRoyalties:p.sellTargetRoyalties,source:t,sourceAuthority:n,tokenProgram:u.TOKEN_PROGRAM_ID,clock:c.SYSVAR_CLOCK_PUBKEY};return m?b.push(await this.instruction.sellNativeV0(M,{accounts:{common:T,destination:i,state:l.publicKey,wrappedSolMint:l.wrappedSolMint,mintAuthority:(await eA.wrappedSolMintAuthorityKey(this.programId))[0],solStorage:l.solStorage,systemProgram:c.SystemProgram.programId}})):b.push(await this.instruction.sellV1(M,{accounts:{common:T,state:l.publicKey,destination:i}})),{output:null,signers:[],instructions:b}}async sell(e,t="confirmed"){await this.execute(this.sellInstructions(e),e.payer,t)}async closeInstructions({tokenBonding:e,generalAuthority:t,refund:n=this.wallet.publicKey}){let i=await this.getTokenBonding(e);if(!i.generalAuthority)throw Error("Cannot close a bonding account with no general authority");return{output:null,signers:[],instructions:[await this.instruction.closeTokenBondingV0({accounts:{refund:n,tokenBonding:e,generalAuthority:t||i.generalAuthority,targetMint:i.targetMint,baseStorage:i.baseStorage,tokenProgram:u.TOKEN_PROGRAM_ID}})]}}async close(e,t="confirmed"){await this.execute(this.closeInstructions(e),e.payer,t)}async transferReservesInstructions({tokenBonding:e,destination:t,amount:n,reserveAuthority:i,destinationWallet:r=this.wallet.publicKey,payer:a=this.wallet.publicKey}){let o=await this.getTokenBonding(e),s=await this.getState(),l=o.baseMint.equals(u.NATIVE_MINT)||o.baseMint.equals(s.wrappedSolMint),g=await d(this.provider,o.baseMint),p=[];if(!o.reserveAuthority)throw Error("Cannot transfer reserves on a bonding account with no reserve authority");!t&&l&&(t=r);let m=t&&await this.provider.connection.getAccountInfo(t);if(!l&&(!m||m.owner.equals(c.SystemProgram.programId))){let e=await u.Token.getAssociatedTokenAddress(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,o.baseMint,r,!1);await this.accountExists(e)||p.push(u.Token.createAssociatedTokenAccountInstruction(u.ASSOCIATED_TOKEN_PROGRAM_ID,u.TOKEN_PROGRAM_ID,o.baseMint,e,r,a)),t=e}let h={tokenBonding:e,reserveAuthority:i||o.reserveAuthority,baseMint:o.baseMint,baseStorage:o.baseStorage,tokenProgram:u.TOKEN_PROGRAM_ID},y={amount:eo(n,g)};return l?p.push(await this.instruction.transferReservesNativeV0(y,{accounts:{common:h,destination:t,state:s.publicKey,wrappedSolMint:s.wrappedSolMint,mintAuthority:(await eA.wrappedSolMintAuthorityKey(this.programId))[0],solStorage:s.solStorage,systemProgram:c.SystemProgram.programId}})):p.push(await this.instruction.transferReservesV0(y,{accounts:{common:h,destination:t}})),{output:null,signers:[],instructions:p}}async transferReserves(e,t="confirmed"){await this.execute(this.transferReservesInstructions(e),e.payer,t)}async getBondingPricingCurve(e){let t=await this.getTokenBonding(e),n=await d(this.provider,t.targetMint),i=await d(this.provider,t.baseMint),r=await g(this.provider,t.baseStorage);return await this.getPricingCurve(t.curve,E(t.ignoreExternalReserveChanges?t.reserveBalanceFromBonding:r.amount,i),E(t.ignoreExternalSupplyChanges?t.supplyFromBonding:n.supply,n),t.goLiveUnixTime.toNumber())}async getPricingCurve(e,t,n,i){let r=await this.getCurve(e);return function(e,t,n,i){if("timeV0"===Object.keys(e.definition)[0])return new el({curve:e,baseAmount:t,targetSupply:n,goLiveUnixTime:i});throw Error("Curve not found")}(r,t,n,i)}async getPricing(e){let t=await this.getBondingHierarchy(e);if(t)return new ey({hierarchy:t})}async getBondingHierarchy(e,t){if(!e)return;let[n,i]=await Promise.all([this.getState().then(e=>e?.wrappedSolMint),this.getTokenBonding(e)]);if(t?.equals(u.NATIVE_MINT)&&(t=n),!i)return;let r=await this.getBondingPricingCurve(e),a=(await eA.tokenBondingKey(i.baseMint))[0],o=new er({parent:t?.equals(i.baseMint)?void 0:await this.getBondingHierarchy(a,t),tokenBonding:i,pricingCurve:r,wrappedSolMint:n});return(o.parent||{}).child=o,o}}},2502:function(e,t,n){e.exports=n(10795)},87132:function(e,t,n){"use strict";var i=n(54494),r=n(35281),a=n(42256),o=n(50176),s=n(67082),u=n(60073),c=n(69266),l=n(36476),d=n(57063),g=n(98749);e.exports=function(e){return new Promise(function(t,n){var p,m=e.data,h=e.headers,y=e.responseType;function f(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}i.isFormData(m)&&delete h["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(b+":"+v)}var A=s(e.baseURL,e.url);function S(){if(w){var i="getAllResponseHeaders"in w?u(w.getAllResponseHeaders()):null;r(function(e){t(e),f()},function(e){n(e),f()},{data:y&&"text"!==y&&"json"!==y?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:i,config:e,request:w}),w=null}}if(w.open(e.method.toUpperCase(),o(A,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=S:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(S)},w.onabort=function(){w&&(n(l("Request aborted",e,"ECONNABORTED",w)),w=null)},w.onerror=function(){n(l("Network Error",e,null,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",w)),w=null},i.isStandardBrowserEnv()){var M=(e.withCredentials||c(A))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;M&&(h[e.xsrfHeaderName]=M)}"setRequestHeader"in w&&i.forEach(h,function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete h[t]:w.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),y&&"json"!==y&&(w.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){w&&(n(!e||e&&e.type?new g("canceled"):e),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),m||(m=null),w.send(m)})}},10795:function(e,t,n){"use strict";var i=n(54494),r=n(95479),a=n(98014),o=n(33550),s=function e(t){var n=new a(t),s=r(a.prototype.request,n);return i.extend(s,a.prototype,n),i.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(57063));s.Axios=a,s.Cancel=n(98749),s.CancelToken=n(3311),s.isCancel=n(95738),s.VERSION=n(36089).version,s.all=function(e){return Promise.all(e)},s.spread=n(89294),s.isAxiosError=n(95212),e.exports=s,e.exports.default=s},98749:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},3311:function(e,t,n){"use strict";var i=n(98749);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;this.promise.then(function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}}),this.promise.then=function(e){var t,i=new Promise(function(e){n.subscribe(e),t=e}).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},95738:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},98014:function(e,t,n){"use strict";var i=n(54494),r=n(50176),a=n(74381),o=n(26570),s=n(33550),u=n(89769),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new a,response:new a}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var a=[];if(this.interceptors.response.forEach(function(e){a.push(e.fulfilled,e.rejected)}),!r){var l=[o,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(a),t=Promise.resolve(e);l.length;)t=t.then(l.shift(),l.shift());return t}for(var d=e;i.length;){var g=i.shift(),p=i.shift();try{d=g(d)}catch(e){p(e);break}}try{t=o(d)}catch(e){return Promise.reject(e)}for(;a.length;)t=t.then(a.shift(),a.shift());return t},l.prototype.getUri=function(e){return r((e=s(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){l.prototype[e]=function(t,n,i){return this.request(s(i||{},{method:e,url:t,data:n}))}}),e.exports=l},74381:function(e,t,n){"use strict";var i=n(54494);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},67082:function(e,t,n){"use strict";var i=n(61727),r=n(24899);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},36476:function(e,t,n){"use strict";var i=n(69477);e.exports=function(e,t,n,r,a){return i(Error(e),t,n,r,a)}},26570:function(e,t,n){"use strict";var i=n(54494),r=n(70311),a=n(95738),o=n(57063),s=n(98749);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return u(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!a(t)&&(u(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},69477:function(e){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},33550:function(e,t,n){"use strict";var i=n(54494);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function a(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function o(e){if(!i.isUndefined(t[e]))return r(void 0,t[e])}function s(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function u(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return i.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=c[e]||a,r=t(e);i.isUndefined(r)&&t!==u||(n[e]=r)}),n}},35281:function(e,t,n){"use strict";var i=n(36476);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},70311:function(e,t,n){"use strict";var i=n(54494),r=n(57063);e.exports=function(e,t,n){var a=this||r;return i.forEach(n,function(n){e=n.call(a,e,t)}),e}},57063:function(e,t,n){"use strict";var i,r=n(73656),a=n(54494),o=n(9078),s=n(69477),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?i=n(87132):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(i=n(87132)),i),transformRequest:[function(e,t){return(o(t,"Accept"),o(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e))?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(a.isString(e))try{return(0,JSON.parse)(e),a.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&a.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],function(e){l.headers[e]={}}),a.forEach(["post","put","patch"],function(e){l.headers[e]=a.merge(u)}),e.exports=l},36089:function(e){e.exports={version:"0.24.0"}},95479:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},50176:function(e,t,n){"use strict";var i=n(54494);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)a=n(t);else if(i.isURLSearchParams(t))a=t.toString();else{var a,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},24899:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},42256:function(e,t,n){"use strict";var i=n(54494);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},61727:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},95212:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},69266:function(e,t,n){"use strict";var i=n(54494);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},9078:function(e,t,n){"use strict";var i=n(54494);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},60073:function(e,t,n){"use strict";var i=n(54494),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e&&i.forEach(e.split("\n"),function(e){a=e.indexOf(":"),t=i.trim(e.substr(0,a)).toLowerCase(),n=i.trim(e.substr(a+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},89294:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},89769:function(e,t,n){"use strict";var i=n(36089).version,r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var a={};r.transitional=function(e,t,n){function r(e,t){return"[Axios v"+i+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw Error(r(i," has been removed"+(t?" in "+t:"")));return t&&!a[i]&&(a[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var a=i[r],o=t[a];if(o){var s=e[a],u=void 0===s||o(s,a,e);if(!0!==u)throw TypeError("option "+a+" must be "+u);continue}if(!0!==n)throw Error("Unknown option "+a)}},validators:r}},54494:function(e,t,n){"use strict";var i=n(95479),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function l(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,i){u(t[i])&&u(n)?t[i]=e(t[i],n):u(n)?t[i]=e({},n):a(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return t},extend:function(e,t,n){return l(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},85660:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(80800),r=n(4175);function a(e,t){(0,r.Z)(2,arguments);var n=(0,i.Z)(e).getTime(),a=(0,i.Z)(t.start).getTime(),o=(0,i.Z)(t.end).getTime();if(!(a<=o))throw RangeError("Invalid interval");return n>=a&&n<=o}},41297:function(e){var t,n;n={},(t={}).length=0,t.getItem=function(e){return e in n?n[e]:null},t.setItem=function(e,i){void 0===i?t.removeItem(e):(!n.hasOwnProperty(e)&&t.length++,n[e]=""+i)},t.removeItem=function(e){n.hasOwnProperty(e)&&(delete n[e],t.length--)},t.key=function(e){return Object.keys(n)[e]||null},t.clear=function(){n={},t.length=0},e.exports=t},81420:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var i=n(52983),r=n(14549);function a(){let{publicKey:e,signTransaction:t,signAllTransactions:n}=(0,r.O)();return(0,i.useMemo)(()=>e&&t&&n?{publicKey:e,signTransaction:t,signAllTransactions:n}:void 0,[e,t,n])}}}]);